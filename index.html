<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>El Rescate</title>
<style>
body {
    margin: 0;
    overflow: hidden;
    background: black;
}
canvas {
    display: block;
    margin: auto;
    background: #bde0fe; /* Azul bebé */
}
#levelScreen {
    position: absolute;
    width: 100%;
    height: 100%;
    background: black;
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    font-family: Arial;
}
#levelScreen h1 {
    font-size: 60px;
    margin: 0;
}
#levelScreen p {
    font-size: 20px;
}
</style>
</head>
<body>

<div id="levelScreen">
    <h1 id="levelTitle">NIVEL 1</h1>
    <p>Prepárate... la dificultad aumenta</p>
</div>

<canvas id="gameCanvas" width="900" height="500"></canvas>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const levelScreen = document.getElementById("levelScreen");
const levelTitle = document.getElementById("levelTitle");

let level = 1;
let gravity = 0.8;
let gameSpeed = 4;
let obstacles = [];
let clouds = [];
let floorOffset = 0;
let distance = 0;
let levelLength = 4000;
let gameOver = false;
let gameStarted = false;
let levelTimer = 0;
let showLevelDuration = 120; // frames (~2 segundos a 60fps)

const player = {
    x: 100,
    y: 350,
    width: 40,
    height: 50,
    dy: 0,
    jumping: false
};

function prepareLevel() {
    levelScreen.style.display = "flex";
    levelTitle.innerText = "NIVEL " + level;
    levelTimer = 0;
    gameStarted = false;

    obstacles = [];
    distance = 0;
    gameSpeed = 3 + level * 1.2;
    levelLength = 4000 + level * 2000;
}

function createClouds() {
    clouds = [];
    for (let i = 0; i < 6; i++) {
        clouds.push({
            x: Math.random() * canvas.width,
            y: Math.random() * 150,
            size: 40 + Math.random() * 40
        });
    }
}

function drawClouds() {
    ctx.fillStyle = "white";
    clouds.forEach(cloud => {
        ctx.beginPath();
        ctx.arc(cloud.x, cloud.y, cloud.size/2, 0, Math.PI*2);
        ctx.fill();
        cloud.x -= gameSpeed * 0.3;
        if (cloud.x < -50) cloud.x = canvas.width + 50;
    });
}

function drawFloor() {
    const brickWidth = 60;
    const brickHeight = 30;

    floorOffset -= gameSpeed;
    if (floorOffset <= -brickWidth) floorOffset = 0;

    for (let x = floorOffset; x < canvas.width; x += brickWidth) {
        for (let y = 400; y < can
