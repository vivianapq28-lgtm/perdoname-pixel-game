<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Perdóname Pixel Game</title>
<style>
body {
    margin:0;
    background:#111;
    overflow:hidden;
    text-align:center;
}

canvas {
    background:#222;
    display:block;
    margin:auto;
}

.controls {
    position:fixed;
    bottom:20px;
    width:100%;
    text-align:center;
}

button {
    padding:15px;
    font-size:20px;
    margin:5px;
}
</style>
</head>
<body>

<canvas id="game" width="800" height="400"></canvas>

<div class="controls">
    <button onclick="moveLeft()">⬅</button>
    <button onclick="jump()">⬆</button>
    <button onclick="moveRight()">➡</button>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let player = {
    x: 50,
    y: 300,
    width: 30,
    height: 30,
    color: "blue",
    dy: 0,
    gravity: 0.6,
    jumping: false
};

let keys = {};

document.addEventListener("keydown", (e) => keys[e.key] = true);
document.addEventListener("keyup", (e) => keys[e.key] = false);

function moveLeft(){ player.x -= 20; }
function moveRight(){ player.x += 20; }
function jump(){
    if(!player.jumping){
        player.dy = -12;
        player.jumping = true;
    }
}

let enemies = [
    {x:400, y:320, width:30, height:30}
];

let lives = 3;

function update(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Movimiento teclado
    if(keys["ArrowLeft"]) player.x -= 5;
    if(keys["ArrowRight"]) player.x += 5;
    if(keys[" "] && !player.jumping){
        player.dy = -12;
        player.jumping = true;
    }

    // Gravedad
    player.dy += player.gravity;
    player.y += player.dy;

    if(player.y > 300){
        player.y = 300;
        player.jumping = false;
    }

    // Dibujar jugador
    ctx.fillStyle = player.color;
    ctx.fillRect(player.x, player.y, player.width, player.height);

    // Dibujar enemigo
    enemies.forEach(enemy => {
        ctx.fillStyle = "red";
        ctx.fillRect(enemy.x, enemy.y, enemy.width, enemy.height);

        // Colisión
        if(player.x < enemy.x + enemy.width &&
           player.x + player.width > enemy.x &&
           player.y < enemy.y + enemy.height &&
           player.y + player.height > enemy.y){

            lives--;
            alert("Te caiste por orgulloso. Vidas restantes: " + lives);
            player.x = 50;
            player.y = 300;

            if(lives <= 0){
                alert("Game Over por no perdonar a tu pequeñita");
                lives = 3;
            }
        }
    });

    requestAnimationFrame(update);
}

update();
</script>

</body>
</html>

